{% extends 'base.html' %}

{% block title %}VideoIntuit{% endblock %}

{% block content %}
<aside class="sidebar">
    <div class="sidebar-buttons">
        <button class="newChat-btn">
            <span class="material-icons">add</span>
        </button>
        <button class="search-btn">
            <span class="material-icons">search</span>
        </button>
        <button class="close-btn" onclick="closeSidebar()">
            <span class="material-icons">close</span>
        </button>
    </div>
    <div class="app-name1">VideoIntuit</div>
    <ul class="sidebar-menu">
        <li>History</li>
    </ul>
</aside>

<main class="main-container">
    <header class="header">
        <div class="app-name">VideoIntuit</div>
        <div class="header-buttons">
            <button class="share-btn" onclick="shareChat()">
                <span class="material-icons">share</span> Share
            </button>
            <div id="signin-button" onclick="window.location.href='{{ login_url }}'" style="cursor: pointer;">
                <span class="material-icons">person</span>
            </div>
        </div>
    </header>

    <section class="chat-area">
        <div class="chat-messages" id="chatMessages">
            </div>
    </section>

    <section class="input-container">
        <section class="file-preview-container" id="filePreviewContainer"></section>

        <input type="file" id="fileInput" hidden multiple>
        <textarea id="messageInput" placeholder="Message VideoIntuit..."></textarea>

        <div class="input-container-buttons">
            <button class="attach-btn" id="attachBtn">+</button>
            <span id="loadingIndicator" class="loading-spinner" style="display: none;"></span>
            <button class="send-btn" id="sendBtn">â†‘</button>
        </div>
    </section>

    <script>
        function focusInput() {
            document.getElementById("messageInput").focus();
        }
        window.onload = focusInput;
        document.querySelector('.main-container').addEventListener('click', (event) => {
            if (event.target.tagName !== 'BUTTON' && event.target.tagName !== 'TEXTAREA' && event.target.id !== 'signin-button' && !event.target.closest('.sidebar')) {
                focusInput();
            }
        });
    </script>
</main>
{% endblock %}